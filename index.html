<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>노란돼지 로그인</title>
    <link rel="stylesheet" href="css/q.css">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAMSxXR7bySxxtMmSkJGVs_wgvieaiASDY",
            authDomain: "noran-9670b.firebaseapp.com",
            projectId: "noran-9670b",
            storageBucket: "noran-9670b.firebasestorage.app",
            messagingSenderId: "646948244842",
            appId: "1:646948244842:web:d10e09bb7e4bc621fb2913",
            measurementId: "G-G460FN0YT2"
        };

        // Firebase 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // 로그인 처리
        document.getElementById("loginForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const username = document.getElementById("loginUsername").value;
            const password = document.getElementById("loginPassword").value;

            try {
                const userDocRef = doc(db, "users", username);
                const docSnap = await getDoc(userDocRef);

                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    if (userData.password === password) {
                        alert("로그인 성공!");
                        // 로그인 성공 후 추가 작업 (페이지 이동 등)
                    } else {
                        alert("비밀번호가 일치하지 않습니다.");
                    }
                } else {
                    alert("아이디를 찾을 수 없습니다.");
                }
            } catch (error) {
                alert("로그인 실패: " + error.message);
            }
        });
    </script>
</head>
<body>
<div class="login-container">
    <h3>로그인</h3>
    <form id="loginForm">
        <!-- 아이디 입력란 -->
        <label for="loginUsername">아이디:</label>
        <input type="text" id="loginUsername" placeholder="아이디" required>

        <!-- 비밀번호 입력란 -->
        <label for="loginPassword">비밀번호:</label>
        <input type="password" id="loginPassword" placeholder="비밀번호" required>

        <button type="submit">로그인</button>
    </form>
    <div class="signup-link">
        <p>아직 계정이 없으신가요?</p>
        <a href="sign_up.html" class="signup-button">회원가입</a>
    </div>
</div>
</body>
</html>
